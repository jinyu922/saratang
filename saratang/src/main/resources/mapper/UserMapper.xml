<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.swyp.saratang.mapper.UserMapper">

     <select id="countBySocialId" resultType="int">
        SELECT COUNT(*) FROM Users WHERE social_id = #{socialId}
    </select>

    <insert id="registerNaverUser">
    INSERT INTO Users (
        username, email, social_id, auth_provider, email_verified, role, bio, 
        weight, height, age, gender, is_active, regdate
    ) 
    VALUES (
        #{username}, #{email}, #{socialId}, #{authProvider}, #{emailVerified}, 
        #{role}, #{bio}, #{weight}, #{height}, #{age}, #{gender}, 
        #{isActive}, NOW()
    )
	</insert>
    
    <select id="findBySocialId" resultType="com.swyp.saratang.model.UserDTO">
    SELECT * FROM users WHERE social_id = #{socialId} LIMIT 1
	</select>
</mapper>